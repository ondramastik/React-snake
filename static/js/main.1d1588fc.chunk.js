(this["webpackJsonpreact-snake"]=this["webpackJsonpreact-snake"]||[]).push([[0],{12:function(o,l,r){},14:function(o,l,r){"use strict";r.r(l);var F,t=r(0),a=r.n(t),e=r(7),n=r.n(e),i=r(2);!function(o){o[o.Empty=0]="Empty",o[o.Floor=1]="Floor",o[o.Wall=2]="Wall",o[o.Snake=3]="Snake",o[o.Food=4]="Food"}(F||(F={}));var c,s=r(5),W=r(3),m=r(4);!function(o){o[o.Top=0]="Top",o[o.Down=1]="Down",o[o.Left=2]="Left",o[o.Right=3]="Right"}(c||(c={}));var p=function(){function o(l,r){Object(W.a)(this,o),this.map=void 0,this.foodLocation=void 0,this.snakeTiles=void 0,this.lastDirection=void 0,this.map=l,this.foodLocation=o.generateFoodLocation(l.tiles),this.snakeTiles=[Object(s.a)({},l.startLocation)],this.lastDirection=r}return Object(m.a)(o,[{key:"tick",value:function(o){var l=this;return new Promise((function(r,F){try{r(void 0!==o?l.handleTick(o):l.getGameView())}catch(t){F(t)}}))}},{key:"reset",value:function(){return this.snakeTiles=[Object(s.a)({},this.map.startLocation)],this.foodLocation=o.generateFoodLocation(this.map.tiles),Promise.resolve(this.getGameView())}},{key:"handleTick",value:function(l){var r=this.snakeTiles[this.snakeTiles.length-1],F=Object(s.a)({},r);switch(l){case c.Top:F.X-=1;break;case c.Down:F.X+=1;break;case c.Left:F.Y-=1;break;case c.Right:F.Y+=1}return this.validate(F),this.snakeTiles.push(F),this.foodLocation.X===F.X&&this.foodLocation.Y===F.Y?this.foodLocation=o.generateFoodLocation(this.map.tiles):this.snakeTiles.shift(),this.getGameView()}},{key:"getGameView",value:function(){return{tiles:this.map.tiles,snakeTiles:this.snakeTiles,foodLocation:this.foodLocation}}},{key:"validate",value:function(o){if(!this.map.tiles[o.X][o.Y])throw Error("Player out of field");if(![F.Floor,F.Food].includes(this.map.tiles[o.X][o.Y]))throw Error("Player crashed");if(this.snakeTiles.filter((function(l){return l.X===o.X&&l.Y===o.Y})).length>0)throw Error("The player ate himself")}}],[{key:"generateFoodLocation",value:function(l){for(var r=-1;;){var t=o.randomIndex(l.length);if(console.log(l[t]),void 0!==l[t]&&l[t].includes(F.Floor)){r=t;break}}for(var a=-1;;){var e=o.randomIndex(l[r].length);if(console.log(l[r][e]),void 0!==l[r][e]&&l[r][e]===F.Floor){a=e;break}}return{X:r,Y:a}}},{key:"randomIndex",value:function(o){return Math.floor(Math.random()*o)}}]),o}(),y=function(){function o(){Object(W.a)(this,o)}return Object(m.a)(o,[{key:"tick",value:function(o){return Promise.resolve({tiles:[],snakeTiles:[],foodLocation:{X:1,Y:1}})}},{key:"reset",value:function(){return Promise.resolve({tiles:[],snakeTiles:[],foodLocation:{X:1,Y:1}})}}]),o}(),E=a.a.createContext(new y),u=(r(12),r(1)),d=function(o,l){return o.snakeTiles.filter((function(o){return o.X===l.X&&o.Y===l.Y})).length>0?F.Snake:o.foodLocation.X===l.X&&o.foodLocation.Y===l.Y?F.Food:o.tiles[l.X][l.Y]},f=function(o){var l=o.gameField;return Object(u.jsx)("div",{id:"game-field-presenter",children:l.tiles.map((function(o,r){return Object(u.jsxs)(a.a.Fragment,{children:[o.map((function(o,F){return Object(u.jsx)("div",{className:"tile tile-".concat(d(l,{X:r,Y:F}))},"".concat(r,"-").concat(F))})),Object(u.jsx)("div",{})]})}))})},h=function(o){var l=o.gameSpeed,r=Object(t.useState)(),F=Object(i.a)(r,2),a=F[0],e=F[1],n=Object(t.useState)(!1),s=Object(i.a)(n,2),W=s[0],m=s[1],p=Object(t.useState)(!1),y=Object(i.a)(p,2),d=y[0],h=y[1],b=Object(t.useState)(),j=Object(i.a)(b,2),v=j[0],k=j[1],O=Object(t.useState)(0),g=Object(i.a)(O,2),L=g[0],w=g[1],T=Object(t.useState)(),x=Object(i.a)(T,2),X=x[0],Y=x[1],S=Object(t.useState)(),D=Object(i.a)(S,2),P=D[0],R=D[1],C=Object(t.useContext)(E),A=Object(t.useCallback)((function(o,l){switch(l){case c.Left:if(o===c.Right)return!1;break;case c.Top:if(o===c.Down)return!1;break;case c.Right:if(o===c.Left)return!1;break;case c.Down:if(o===c.Top)return!1}return!0}),[]);return Object(t.useEffect)((function(){d||W||(document.addEventListener("keydown",(function(o){var l=void 0;switch(o.code){case"ArrowLeft":l=c.Left;break;case"ArrowUp":l=c.Top;break;case"ArrowRight":l=c.Right;break;case"ArrowDown":l=c.Down}void 0!==l&&R(l)})),m(!0))}),[X,d,A,W]),Object(t.useEffect)((function(){W&&(setTimeout((function(){return w(L+1)}),l),C.tick(P).then((function(o){return e(o)})).catch((function(o){k(o.message),m(!1),h(!0)})),Y(P))}),[l,W,C,L]),Object(t.useEffect)((function(){A(X,P)||R(X)}),[X,A,P]),Object(u.jsxs)("div",{id:"game",children:[Object(u.jsxs)("h1",{children:["Sm\u011br: ",X]}),Object(u.jsxs)("h1",{children:["Tick: ",L]}),v&&Object(u.jsxs)("h1",{children:["Error: ",v]}),a&&Object(u.jsx)(f,{gameField:a}),Object(u.jsx)("button",{onClick:function(){return C.reset().then((function(o){return e(o)})),w(0),h(!1),k(void 0),m(!0),R(void 0),void Y(void 0)},disabled:W,children:"Restart"})]})};var b=function(){var o=Object(t.useState)(new p({tiles:[[F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Empty,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Floor,F.Wall],[F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall,F.Wall]],startLocation:{X:1,Y:1}},c.Down)),l=Object(i.a)(o,1)[0];return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(E.Provider,{value:l,children:Object(u.jsx)(h,{gameSpeed:75})})})},j=function(o){o&&o instanceof Function&&r.e(3).then(r.bind(null,15)).then((function(l){var r=l.getCLS,F=l.getFID,t=l.getFCP,a=l.getLCP,e=l.getTTFB;r(o),F(o),t(o),a(o),e(o)}))};n.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(b,{})}),document.getElementById("root")),j()}},[[14,1,2]]]);
//# sourceMappingURL=main.1d1588fc.chunk.js.map